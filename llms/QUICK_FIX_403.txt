â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  FIX 403 FORBIDDEN - QUICK GUIDE                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  ERROR: "Expected HTTP 101 response but was 403 Forbidden"      â•‘
â•‘                                                                 â•‘
â•‘  CAUSE: CORS (Cross-Origin Resource Sharing) blocking          â•‘
â•‘                                                                 â•‘
â•‘  âœ… FIX ALREADY APPLIED TO CODE                                 â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ACTION REQUIRED:                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  1. RESTART SERVER (REQUIRED!)                                  â•‘
â•‘     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘     â”‚  $ cd /home/animesh/Code/Hackathon/cam-sportalytics/  â”‚  â•‘
â•‘     â”‚  $ cd server                                          â”‚  â•‘
â•‘     â”‚                                                       â”‚  â•‘
â•‘     â”‚  Press Ctrl+C in server terminal                     â”‚  â•‘
â•‘     â”‚                                                       â”‚  â•‘
â•‘     â”‚  $ python main.py                                    â”‚  â•‘
â•‘     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                                                 â•‘
â•‘  2. VERIFY CORS IS ENABLED                                      â•‘
â•‘     Look for this in server output:                             â•‘
â•‘     âœ“ "CORS middleware enabled - accepting connections..."      â•‘
â•‘                                                                 â•‘
â•‘  3. TEST CONNECTIVITY (optional)                                â•‘
â•‘     $ ./test_connectivity.sh 192.168.1.2 8080                   â•‘
â•‘                                                                 â•‘
â•‘  4. REBUILD AND RUN ANDROID APP                                 â•‘
â•‘     Should now connect successfully!                            â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  UNDERSTANDING THE ERROR:                                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  ğŸ”¹ HTTP 101 "Switching Protocols"                              â•‘
â•‘     = Correct response for WebSocket connections                â•‘
â•‘     = Connection upgraded from HTTP â†’ WebSocket                 â•‘
â•‘     = Connection stays OPEN for bidirectional communication     â•‘
â•‘                                                                 â•‘
â•‘  ğŸ”¹ HTTP 403 "Forbidden"                                        â•‘
â•‘     = Server refusing to authorize the connection               â•‘
â•‘     = Caused by CORS security blocking different origins        â•‘
â•‘     = Connection REJECTED                                       â•‘
â•‘                                                                 â•‘
â•‘  ğŸ”¹ Why not HTTP 200?                                           â•‘
â•‘     = 200 means "OK, here's your response" [connection closes]  â•‘
â•‘     = 101 means "OK, switching to WebSocket" [stays open]       â•‘
â•‘     = WebSockets need persistent open connections!              â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  NETWORK CONNECTIVITY TESTS:                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  âœ… Same WiFi Network?                                          â•‘
â•‘     Server:  $ ip addr | grep 192.168.1                         â•‘
â•‘     Android: Settings â†’ WiFi â†’ Check IP                         â•‘
â•‘              Should both be 192.168.1.x                         â•‘
â•‘                                                                 â•‘
â•‘  âœ… Server Running?                                             â•‘
â•‘     $ curl http://192.168.1.2:8080/health                       â•‘
â•‘     Should return: {"status":"healthy",...}                     â•‘
â•‘                                                                 â•‘
â•‘  âœ… Port 8080 Open?                                             â•‘
â•‘     $ netstat -tuln | grep 8080                                 â•‘
â•‘     Should show: tcp ... 0.0.0.0:8080 ... LISTEN                â•‘
â•‘                                                                 â•‘
â•‘  âœ… From Another Laptop on Same WiFi:                           â•‘
â•‘     $ ping 192.168.1.2                                          â•‘
â•‘     $ curl http://192.168.1.2:8080/health                       â•‘
â•‘     $ ./test_connectivity.sh 192.168.1.2 8080                   â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  WHAT WAS ADDED TO FIX THIS:                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  File: server/main.py                                           â•‘
â•‘                                                                 â•‘
â•‘  Added CORS middleware:                                         â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚  from fastapi.middleware.cors import CORSMiddleware    â”‚    â•‘
â•‘  â”‚                                                        â”‚    â•‘
â•‘  â”‚  app.add_middleware(                                  â”‚    â•‘
â•‘  â”‚      CORSMiddleware,                                  â”‚    â•‘
â•‘  â”‚      allow_origins=["*"],  # Allow all origins        â”‚    â•‘
â•‘  â”‚      allow_credentials=True,                          â”‚    â•‘
â•‘  â”‚      allow_methods=["*"],                             â”‚    â•‘
â•‘  â”‚      allow_headers=["*"],                             â”‚    â•‘
â•‘  â”‚  )                                                    â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                 â•‘
â•‘  This allows WebSocket connections from any device on           â•‘
â•‘  the same network (safe for local development).                 â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  IF FIREWALL IS BLOCKING (after restart):                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  $ sudo ufw status                                              â•‘
â•‘  $ sudo ufw allow 8080/tcp                                      â•‘
â•‘  $ sudo ufw reload                                              â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  EXPECTED ANDROID APP BEHAVIOR AFTER FIX:                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  Bottom of AR screen shows:                                     â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚  ğŸŸ¢  âœ“ Connected to Server                            â”‚    â•‘
â•‘  â”‚      Streaming AR data â€¢ ws://192.168.1.2:8080/...   â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘  (Auto-hides after 3 seconds)                                   â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  EXPECTED SERVER LOGS AFTER FIX:                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  INFO:__main__:CORS middleware enabled - accepting...          â•‘
â•‘  ============================================                    â•‘
â•‘  WebSocket connection attempt from: 192.168.1.100:45678         â•‘
â•‘    Client host: 192.168.1.100                                   â•‘
â•‘    Client port: 45678                                           â•‘
â•‘  ============================================                    â•‘
â•‘  âœ“ WebSocket connection ACCEPTED for client ...                â•‘
â•‘  â†’ First frame received from client (4562 bytes)                â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  TROUBLESHOOTING CHECKLIST:                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  â˜ Server restarted after code change?                          â•‘
â•‘  â˜ See "CORS middleware enabled" in server logs?                â•‘
â•‘  â˜ Both devices on same WiFi (192.168.1.x)?                     â•‘
â•‘  â˜ Correct server IP in HelloArActivity.kt line 100?            â•‘
â•‘  â˜ Server health endpoint responding (curl test)?               â•‘
â•‘  â˜ Port 8080 not blocked by firewall?                           â•‘
â•‘  â˜ No VPN/proxy interfering?                                    â•‘
â•‘                                                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  HELPFUL DOCUMENTATION:                                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  ğŸ“„ FIXING_403_ERROR.md     - Detailed fix guide                â•‘
â•‘  ğŸ“„ HTTP_101_EXPLAINED.md   - Visual explanation                â•‘
â•‘  ğŸ“„ DEBUGGING_GUIDE.md      - General debugging                 â•‘
â•‘  ğŸ”§ test_connectivity.sh    - Network test script               â•‘
â•‘                                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TL;DR: Restart the server with Ctrl+C then "python main.py"
       The 403 will become 101 and connection will work! âœ“
